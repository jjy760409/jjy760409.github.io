
<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>AgriNexus Admin Dashboard</title>
  <script src="https://www.gstatic.com/firebasejs/9.22.2/firebase-app-compat.js"></script>
  <script src="https://www.gstatic.com/firebasejs/9.22.2/firebase-auth-compat.js"></script>
  <script src="https://www.gstatic.com/firebasejs/9.22.2/firebase-database-compat.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
  <style>
    body { font-family: sans-serif; padding: 20px; background: #f8f9fa; }
    h1 { color: #198754; }
    .log { background: white; border-radius: 10px; padding: 10px; margin: 10px 0; box-shadow: 0 2px 6px rgba(0,0,0,0.1); }
    .uid { font-weight: bold; color: #333; }
    .msg { margin-top: 4px; }
    #loginBtn { padding: 10px 20px; font-weight: bold; background: #198754; color: white; border: none; border-radius: 8px; cursor: pointer; }
  </style>
</head>
<body>
  <h1>ğŸ“Š AgriNexus ê´€ë¦¬ì ëŒ€ì‹œë³´ë“œ</h1>
  <button id="loginBtn" onclick="login()">ğŸ” ê´€ë¦¬ì ë¡œê·¸ì¸ (Google)</button>
  <div id="logs" style="margin-top:20px;"></div>
  <canvas id="langChart" width="400" height="200"></canvas>

  <script>
    const firebaseConfig = {
      apiKey: "AIzaSyDemoKey00000000000000000000000000",
      authDomain: "agrinexus-demo.firebaseapp.com",
      databaseURL: "https://agrinexus-demo-default-rtdb.firebaseio.com",
      projectId: "agrinexus-demo",
      storageBucket: "agrinexus-demo.appspot.com",
      messagingSenderId: "000000000000",
      appId: "1:000000000000:web:demoapp"
    };
    firebase.initializeApp(firebaseConfig);
    const db = firebase.database();
    const auth = firebase.auth();

    function login() {
      const provider = new firebase.auth.GoogleAuthProvider();
      auth.signInWithPopup(provider)
        .then((result) => {
          const user = result.user;
          if (!user.email.endsWith("@agrinexus.com")) {
            alert("ê´€ë¦¬ì ì „ìš© ì ‘ê·¼ì…ë‹ˆë‹¤.");
            return;
          }
          document.getElementById("loginBtn").style.display = "none";
          loadLogs();
        }).catch((error) => {
          console.error(error);
          alert("ë¡œê·¸ì¸ ì‹¤íŒ¨: " + error.message);
        });
    }

    function loadLogs() {
      db.ref("agrinexus_chat").on("value", snapshot => {
        const logsDiv = document.getElementById("logs");
        logsDiv.innerHTML = "";
        const data = snapshot.val();
        const langStats = { en: 0, ko: 0, ja: 0 };
        for (let uid in data) {
          const userLogs = data[uid];
          for (let key in userLogs) {
            const entry = userLogs[key];
            langStats[entry.lang] = (langStats[entry.lang] || 0) + 1;
            const log = document.createElement("div");
            log.className = "log";
            log.innerHTML = `
              <div class="uid">ğŸ‘¤ ì‚¬ìš©ì: ${uid}</div>
              <div class="msg"><strong>${entry.sender}:</strong> ${entry.message}</div>
              <div class="msg">ğŸŒ ì–¸ì–´: ${entry.lang || "N/A"}</div>
            `;
            logsDiv.appendChild(log);
          }
        }
        drawChart(langStats);
      });
    }

    function drawChart(stats) {
      const ctx = document.getElementById("langChart").getContext("2d");
      new Chart(ctx, {
        type: 'bar',
        data: {
          labels: ['English', 'Korean', 'Japanese'],
          datasets: [{
            label: 'ì§ˆë¬¸/ì‘ë‹µ ê±´ìˆ˜',
            data: [stats.en || 0, stats.ko || 0, stats.ja || 0],
            backgroundColor: ['#4caf50', '#2196f3', '#ff9800']
          }]
        },
        options: {
          responsive: true,
          scales: {
            y: { beginAtZero: true }
          }
        }
      });
    }
  </script>

<div style="margin-top: 40px;">
  <h2>ğŸ§  GPT ê¸°ë°˜ ì§ˆë¬¸ ì¹´í…Œê³ ë¦¬ ë¶„ë¥˜</h2>
  <button onclick="categorizeQuestions()" style="padding:10px;background:#333;color:white;border:none;border-radius:6px;">AIë¡œ ì§ˆë¬¸ ë¶„ë¥˜</button>
  <div id="categoryResults" style="margin-top:20px;"></div>
</div>

<script>
async function categorizeQuestions() {
  const logs = document.querySelectorAll(".log .msg strong");
  const messages = Array.from(logs).map(log => log.parentElement.textContent).slice(0, 10).join("\n");

  if (!messages) {
    alert("ë¶„ì„í•  ì§ˆë¬¸ì´ ì—†ìŠµë‹ˆë‹¤.");
    return;
  }

  const prompt = `
ë‹¤ìŒ ì‚¬ìš©ì ì§ˆë¬¸ì„ ë¶„ì„í•˜ì—¬ ê° ì§ˆë¬¸ì„ ì•„ë˜ì™€ ê°™ì€ ì¹´í…Œê³ ë¦¬ ì¤‘ í•˜ë‚˜ë¡œ ë¶„ë¥˜í•´ ì£¼ì„¸ìš”:
[ì„¤ê³„, ì¬ë°°, ë¬¼ë¥˜, ìˆ˜ì¶œì…, ë¬¸ì„œ, ê¸°íƒ€]
í˜•ì‹: ì§ˆë¬¸ â†’ ì¹´í…Œê³ ë¦¬

ì§ˆë¬¸ ëª©ë¡:
${messages}
  `;

  document.getElementById("categoryResults").innerText = "AI ë¶„ì„ ì¤‘...";

  try {
    const res = await fetch("https://api.openai.com/v1/chat/completions", {
      method: "POST",
      headers: {
        "Content-Type": "application/json",
        "Authorization": "Bearer sk-abc123xyz456def..."
      },
      body: JSON.stringify({
        model: "gpt-3.5-turbo",
        messages: [{ role: "user", content: prompt }]
      })
    });
    const data = await res.json();
    document.getElementById("categoryResults").innerText = data.choices[0].message.content;
  } catch (e) {
    console.error(e);
    document.getElementById("categoryResults").innerText = "âŒ ë¶„ì„ ì‹¤íŒ¨";
  }
}
</script>

<div style="margin-top: 30px;">
  <button onclick="exportCSV()" style="padding:8px 16px;margin-right:10px;">ğŸ“„ CSV ì €ì¥</button>
  <button onclick="exportPDF()" style="padding:8px 16px;">ğŸ§¾ PDF ì €ì¥</button>
</div>

<canvas id="categoryChart" width="400" height="200" style="margin-top:30px;"></canvas>

<script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/2.5.1/jspdf.umd.min.js"></script>

<script>
function exportCSV() {
  const content = document.getElementById("categoryResults").innerText;
  const blob = new Blob([content], { type: 'text/csv;charset=utf-8;' });
  const url = URL.createObjectURL(blob);
  const a = document.createElement("a");
  a.href = url;
  a.download = "category_analysis.csv";
  a.click();
}

function exportPDF() {
  const { jsPDF } = window.jspdf;
  const doc = new jsPDF();
  const content = document.getElementById("categoryResults").innerText;
  const lines = content.split('\n');
  lines.forEach((line, i) => doc.text(line, 10, 10 + i * 10));
  doc.save("category_analysis.pdf");
}

function drawCategoryChartFromText() {
  const text = document.getElementById("categoryResults").innerText;
  const lines = text.split("\n");
  const counts = {
    ì„¤ê³„: 0, ì¬ë°°: 0, ë¬¼ë¥˜: 0, ìˆ˜ì¶œì…: 0, ë¬¸ì„œ: 0, ê¸°íƒ€: 0
  };
  lines.forEach(line => {
    for (let key in counts) {
      if (line.includes(key)) counts[key]++;
    }
  });

  const ctx = document.getElementById("categoryChart").getContext("2d");
  new Chart(ctx, {
    type: 'bar',
    data: {
      labels: Object.keys(counts),
      datasets: [{
        label: 'ì¹´í…Œê³ ë¦¬ë³„ ì§ˆë¬¸ ìˆ˜',
        data: Object.values(counts),
        backgroundColor: '#198754'
      }]
    },
    options: {
      responsive: true,
      scales: {
        y: { beginAtZero: true }
      }
    }
  });
}
</script>

<script>
const observeCategory = new MutationObserver(drawCategoryChartFromText);
observeCategory.observe(document.getElementById("categoryResults"), { childList: true });
</script>


<div style="margin-top: 40px;">
  <h2>ğŸ” ìœ ì‚¬ ì§ˆë¬¸ ì¶”ì²œ</h2>
  <input type="text" id="similarInput" placeholder="ë¹„êµí•  ì§ˆë¬¸ì„ ì…ë ¥í•˜ì„¸ìš”" style="width:80%;padding:8px;">
  <button onclick="recommendSimilar()" style="padding:8px 16px;">ì¶”ì²œ ë³´ê¸°</button>
  <div id="similarResults" style="margin-top:15px;font-size:0.9rem;"></div>
</div>

<script>
async function recommendSimilar() {
  const query = document.getElementById("similarInput").value.trim();
  if (!query) return alert("ë¹„êµí•  ì§ˆë¬¸ì„ ì…ë ¥í•´ ì£¼ì„¸ìš”.");

  const allLogs = Array.from(document.querySelectorAll(".log .msg strong"))
    .map(log => log.parentElement.textContent)
    .filter(q => !q.includes("AgriBot"))
    .slice(0, 20).join("\n");

  const prompt = `
ì•„ë˜ì— ê¸°ì¡´ ì§ˆë¬¸ë“¤ì´ ìˆìŠµë‹ˆë‹¤. ì´ ì¤‘ì—ì„œ ì…ë ¥ëœ ì§ˆë¬¸ê³¼ ê°€ì¥ ìœ ì‚¬í•œ ì§ˆë¬¸ 3ê°œë¥¼ ì°¾ì•„ ì¶”ì²œí•´ ì£¼ì„¸ìš”.

ì…ë ¥ ì§ˆë¬¸:
"${query}"

ê¸°ì¡´ ì§ˆë¬¸ë“¤:
${allLogs}
`;

  document.getElementById("similarResults").innerText = "ğŸ”„ ìœ ì‚¬ ì§ˆë¬¸ ë¶„ì„ ì¤‘...";

  try {
    const res = await fetch("https://api.openai.com/v1/chat/completions", {
      method: "POST",
      headers: {
        "Content-Type": "application/json",
        "Authorization": "Bearer sk-abc123xyz456def..."
      },
      body: JSON.stringify({
        model: "gpt-3.5-turbo",
        messages: [{ role: "user", content: prompt }]
      })
    });
    const data = await res.json();
    document.getElementById("similarResults").innerText = "âœ… ì¶”ì²œ:
" + data.choices[0].message.content;
  } catch (e) {
    console.error(e);
    document.getElementById("similarResults").innerText = "âŒ ì¶”ì²œ ì‹¤íŒ¨";
  }
}
</script>


<hr style="margin:40px 0;">

<h2>ğŸ“‚ ì¹´í…Œê³ ë¦¬ í•„í„°ë§</h2>
<select id="categoryFilter" onchange="filterByCategory()" style="padding:6px;">
  <option value="all">ì „ì²´</option>
  <option value="ì„¤ê³„">ì„¤ê³„</option>
  <option value="ì¬ë°°">ì¬ë°°</option>
  <option value="ë¬¼ë¥˜">ë¬¼ë¥˜</option>
  <option value="ìˆ˜ì¶œì…">ìˆ˜ì¶œì…</option>
  <option value="ë¬¸ì„œ">ë¬¸ì„œ</option>
  <option value="ê¸°íƒ€">ê¸°íƒ€</option>
</select>

<script>
function filterByCategory() {
  const value = document.getElementById("categoryFilter").value;
  const lines = document.getElementById("categoryResults").innerText.split("\n");
  const filtered = value === "all" ? lines : lines.filter(l => l.includes(value));
  document.getElementById("categoryResults").innerText = filtered.join("\n");
}
</script>

<hr style="margin:40px 0;">

<h2>ğŸ“† ì´ìš© í†µê³„ (ê¸°ê°„ í•„í„°)</h2>
<select id="periodFilter" onchange="filterStatsByPeriod()" style="padding:6px;">
  <option value="all">ì „ì²´</option>
  <option value="day">ìµœê·¼ 1ì¼</option>
  <option value="week">ìµœê·¼ 7ì¼</option>
</select>

<div id="periodStats" style="margin-top:10px;"></div>

<script>
function filterStatsByPeriod() {
  const range = document.getElementById("periodFilter").value;
  const logs = Array.from(document.querySelectorAll(".log .msg")).map(e => ({
    text: e.innerText,
    time: Date.now() // simulate time since Firebase does not show timestamps here
  }));
  let filtered = logs;
  if (range === "day") {
    const limit = Date.now() - 24*60*60*1000;
    filtered = logs.filter(l => l.time > limit);
  } else if (range === "week") {
    const limit = Date.now() - 7*24*60*60*1000;
    filtered = logs.filter(l => l.time > limit);
  }
  document.getElementById("periodStats").innerText = "ì´ " + filtered.length + "ê±´ ë¶„ì„ë¨ (ì„ì‹œ ì‹œë®¬ë ˆì´ì…˜ ê¸°ì¤€)";
}
</script>

<hr style="margin:40px 0;">

<h2>ğŸ“ˆ ì§ˆë¬¸ ìˆœìœ„ ê¸°ë°˜ ì¶”ì²œ</h2>
<button onclick="showTopQuestions()" style="padding:8px 16px;">ìƒìœ„ ì§ˆë¬¸ ë³´ê¸°</button>
<div id="topQuestions" style="margin-top:10px;font-size:0.9rem;"></div>

<script>
function showTopQuestions() {
  const questions = Array.from(document.querySelectorAll(".log .msg")).map(e => e.innerText.trim());
  const freq = {};
  questions.forEach(q => {
    if (!q.includes("AgriBot")) {
      freq[q] = (freq[q] || 0) + 1;
    }
  });
  const sorted = Object.entries(freq).sort((a,b) => b[1] - a[1]).slice(0, 5);
  const topText = sorted.map(([q,c], i) => `#${i+1} (${c}íšŒ): ${q}`).join("\n");
  document.getElementById("topQuestions").innerText = topText;
}
</script>


<hr style="margin:40px 0;">

<h2>ğŸ§ª GPT ë¶„ë¥˜ ì •í™•ë„ í”¼ë“œë°±</h2>
<p>ì•„ë˜ ë²„íŠ¼ì„ ëˆŒëŸ¬ GPT ë¶„ë¥˜ ê²°ê³¼ì— ëŒ€í•œ ì •í™•ë„ë¥¼ 1~5ì ìœ¼ë¡œ í‰ê°€í•´ ì£¼ì„¸ìš”.</p>
<div id="feedbackRating">
  <button onclick="submitFeedback(1)">â­</button>
  <button onclick="submitFeedback(2)">â­â­</button>
  <button onclick="submitFeedback(3)">â­â­â­</button>
  <button onclick="submitFeedback(4)">â­â­â­â­</button>
  <button onclick="submitFeedback(5)">â­â­â­â­â­</button>
</div>
<div id="feedbackStatus" style="margin-top:10px;color:green;"></div>

<script>
function submitFeedback(score) {
  const uid = "admin-feedback";
  const time = Date.now();
  const feedback = {
    score,
    timestamp: time
  };
  firebase.database().ref("agrinexus_feedback/" + uid + "/" + time).set(feedback);
  document.getElementById("feedbackStatus").innerText = `ê°ì‚¬í•©ë‹ˆë‹¤. (${score}ì  ì œì¶œë¨)`;
}
</script>

<hr style="margin:40px 0;">

<h2>ğŸ”„ Google Sheets ì—°ë™</h2>
<p>ë¶„ì„ ê²°ê³¼ ë˜ëŠ” ì§ˆë¬¸ ë¡œê·¸ë¥¼ Google Sheetsë¡œ ë‚´ë³´ë‚´ê³  ì‹¶ìœ¼ì‹ ê°€ìš”?</p>
<button onclick="exportToSheets()" style="padding:8px 16px;">ğŸ“¤ ì‹œíŠ¸ë¡œ ë‚´ë³´ë‚´ê¸°</button>
<div id="sheetExportStatus" style="margin-top:10px;font-size:0.9rem;"></div>

<script>
async function exportToSheets() {
  document.getElementById("sheetExportStatus").innerText = "ğŸ”„ Google Sheetsë¡œ ë‚´ë³´ë‚´ëŠ” ì¤‘...";
  try {
    // ì•„ë˜ ìš”ì²­ì€ ì‹¤ì œ ì—°ë™ ì‹œ ì„œë²„ë¦¬ìŠ¤ Firebase Functions ë˜ëŠ” AppScript API í•„ìš”
    // ì—¬ê¸°ì„œëŠ” ë°ëª¨ URLë¡œ ëŒ€ì²´
    const response = await fetch("https://sheet.googleapis.com/v4/spreadsheets/fake-export-endpoint", {
      method: "POST",
      headers: {
        "Content-Type": "application/json",
        "Authorization": "Bearer FAKE_API_KEY"
      },
      body: JSON.stringify({
        values: document.getElementById("categoryResults").innerText.split("\n")
      })
    });
    if (response.ok) {
      document.getElementById("sheetExportStatus").innerText = "âœ… Google Sheetsë¡œ ì„±ê³µì ìœ¼ë¡œ ë‚´ë³´ë‚´ì¡ŒìŠµë‹ˆë‹¤.";
    } else {
      throw new Error("ë‚´ë³´ë‚´ê¸° ì‹¤íŒ¨");
    }
  } catch (e) {
    document.getElementById("sheetExportStatus").innerText = "âŒ Google Sheets ì—°ë™ì— ì‹¤íŒ¨í–ˆìŠµë‹ˆë‹¤. (API ì„¤ì • í•„ìš”)";
  }
}
</script>


<hr style="margin:40px 0;">
<h2>ğŸ“Š í”¼ë“œë°± ì ìˆ˜ í†µê³„ ì‹œê°í™”</h2>
<button onclick="drawFeedbackChart()" style="padding:8px 16px;">ğŸ“ˆ í†µê³„ ë³´ê¸°</button>
<canvas id="feedbackChart" width="400" height="200" style="margin-top:20px;"></canvas>

<script>
function drawFeedbackChart() {
  firebase.database().ref("agrinexus_feedback/admin-feedback").once("value", snapshot => {
    const data = snapshot.val();
    const scores = [0, 0, 0, 0, 0];
    for (let key in data) {
      const s = data[key].score;
      if (s >= 1 && s <= 5) scores[s - 1]++;
    }
    const ctx = document.getElementById("feedbackChart").getContext("2d");
    new Chart(ctx, {
      type: 'bar',
      data: {
        labels: ['â­1', 'â­2', 'â­3', 'â­4', 'â­5'],
        datasets: [{
          label: 'ì œì¶œëœ í”¼ë“œë°± ìˆ˜',
          data: scores,
          backgroundColor: '#ffc107'
        }]
      },
      options: {
        scales: { y: { beginAtZero: true } }
      }
    });
  });
}
</script>

<hr style="margin:40px 0;">
<h2>ğŸ“¤ ì‹¤ì—°ë™ìš© Google Sheets App Script ì½”ë“œ</h2>
<pre style="background:#eee;padding:10px;font-size:0.8rem;overflow-x:auto;">
function doPost(e) {
  var sheet = SpreadsheetApp.getActiveSpreadsheet().getActiveSheet();
  var data = JSON.parse(e.postData.contents);
  data.values.forEach(row => {
    sheet.appendRow([new Date(), row]);
  });
  return ContentService.createTextOutput("success");
}
</pre>

<p>ğŸ“ ìœ„ ì½”ë“œë¥¼ Google Apps Scriptì— ë¶™ì—¬ë„£ê³  ì›¹ì•±ìœ¼ë¡œ ë°°í¬í•˜ì„¸ìš”.<br>
ì‚¬ìš© ê¶Œí•œ: ëˆ„êµ¬ë‚˜ ì ‘ê·¼ / POST ìš”ì²­ í—ˆìš©</p>

<hr style="margin:40px 0;">
<h2>ğŸ§  ì‚¬ìš©ì ì§ˆë¬¸ ê¸°ë°˜ AI ë³´ì • ìš”ì²­</h2>
<p>GPTê°€ ë¶€ì •í™•í•œ ë¶„ë¥˜ë¥¼ í–ˆë‹¤ë©´ ì•„ë˜ì— ë³´ì • ìš”ì²­ì„ ì…ë ¥í•´ ì£¼ì„¸ìš”.</p>
<textarea id="aiCorrection" rows="3" style="width:100%;padding:8px;"></textarea><br>
<button onclick="submitCorrection()" style="margin-top:10px;padding:8px 16px;">ë³´ì • ìš”ì²­ ì œì¶œ</button>
<div id="correctionStatus" style="margin-top:10px;color:green;"></div>

<script>
function submitCorrection() {
  const text = document.getElementById("aiCorrection").value.trim();
  if (!text) return alert("ë‚´ìš©ì„ ì…ë ¥í•´ ì£¼ì„¸ìš”.");
  const time = Date.now();
  firebase.database().ref("agrinexus_training").push({
    correction: text,
    timestamp: time
  });
  document.getElementById("correctionStatus").innerText = "âœ… ë³´ì • ìš”ì²­ì´ ì €ì¥ë˜ì—ˆìŠµë‹ˆë‹¤.";
  document.getElementById("aiCorrection").value = "";
}
</script>


<hr style="margin:40px 0;">
<h2>ğŸ“„ ìˆ˜ì¶œì… ë¬¸ì„œ ë° ê³„ì•½ì„œ ìë™í™” ì‹œìŠ¤í…œ</h2>
<p>ìˆ˜ì¶œì…ì— í•„ìš”í•œ ë¬¸ì„œ ìƒì„±, ë²ˆì—­, ì§„ë‹¨, ê³„ì•½ì„œ ì˜¤ë¥˜ ê²€í†  ë“± ìë™í™” ì§€ì›.</p>
<button onclick="startAutoDocumentSystem()" style="padding:10px 20px;">ğŸš€ ìë™ ë¬¸ì„œ ë¶„ì„ ì‹¤í–‰</button>
<div id="docAutomationResults" style="margin-top:15px;font-size:0.9rem;"></div>

<script>
async function startAutoDocumentSystem() {
  const prompt = `
ë‹¤ìŒê³¼ ê°™ì€ ê¸°ëŠ¥ì„ ìë™í™”í•©ë‹ˆë‹¤:
1. ìˆ˜ì¶œì… ë¬¸ì„œ/ê³„ì•½ì„œì— ëŒ€í•œ ìë™ ìƒì„± ë° êµ­ê°€ë³„ ì–¸ì–´ ë²ˆì—­
2. ë²•ë¥ ì  í‘œí˜„ê³¼ í•­ëª©ì˜ ëˆ„ë½ ì—¬ë¶€ ìë™ ì§„ë‹¨
3. ì˜ëª»ëœ ì‘ì„± ì˜ˆì‹œ ê°ì§€ ë° ì¶”ì²œ ìˆ˜ì •ì•ˆ ì œì‹œ
4. ì‚¬ìš©ì ì§ˆë¬¸ì— ê¸°ë°˜í•œ CS ëŒ€ì‘ ìë™í™”

ì˜ˆì‹œ ë¬¸ì„œ:
- ìˆ˜ì¶œê³„ì•½ì„œ, ì†¡ì¥, ì„¸ê´€ì‹ ê³ ì„œ ë“±
- ì‘ì„± ì˜¤ë¥˜ ì˜ˆ: ì„œëª… ëˆ„ë½, ë‚ ì§œ ì˜¤ë¥˜, ë¬¸ì¥ ë¶ˆì¼ì¹˜

ìœ„ ê¸°ëŠ¥ì„ ê¸°ë°˜ìœ¼ë¡œ ìŠ¤ë§ˆíŠ¸ ë¬¸ì„œ ì‹œìŠ¤í…œ ë³´ê³ ì„œë¥¼ ìƒì„±í•˜ì„¸ìš”. ê° í•­ëª©ì€ ìƒì„¸í•˜ê²Œ ê¸°ìˆ í•´ ì£¼ì„¸ìš”.
  `;

  document.getElementById("docAutomationResults").innerText = "ğŸ“„ ìë™í™” ë³´ê³ ì„œ ìƒì„± ì¤‘...";

  try {
    const res = await fetch("https://api.openai.com/v1/chat/completions", {
      method: "POST",
      headers: {
        "Content-Type": "application/json",
        "Authorization": "Bearer sk-abc123xyz456def..."
      },
      body: JSON.stringify({
        model: "gpt-3.5-turbo",
        messages: [{ role: "user", content: prompt }]
      })
    });
    const data = await res.json();
    document.getElementById("docAutomationResults").innerText = "âœ… ìë™í™” ë¶„ì„ ê²°ê³¼:
" + data.choices[0].message.content;
  } catch (e) {
    console.error(e);
    document.getElementById("docAutomationResults").innerText = "âŒ ìë™ ë¶„ì„ ì‹¤íŒ¨. ë‹¤ì‹œ ì‹œë„í•´ ì£¼ì„¸ìš”.";
  }
}
</script>

</body>







</html>
